{"version":3,"sources":["webpack:///./src/pages/troubleshooting/operator-upgrades.mdx"],"names":["name","_frontmatter","PageDescription","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"yeAMO,IAEeA,EAFTC,EAAe,GAOtBC,GALgBF,EAKgB,kBALR,SAA6BG,GAEzD,OADAC,QAAQC,KAAK,aAAeL,EAAO,2EAC5B,kBAASG,KAIZG,EAAc,CAClBL,gBAEIM,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGP,E,oIACF,mBACD,OAAO,YAACI,EAAD,KAAeD,EAAiBH,EAAhC,CAAuCO,WAAYA,EAAYC,QAAQ,cAG5E,YAACT,EAAD,CAAiBS,QAAQ,mBACvB,iLAEF,+BACA,2CAA0B,0BAAYC,WAAW,MAAvB,kBAC1B,wDAAuC,0BAAYA,WAAW,KAAvB,SAAvC,OAAgG,0BAAYA,WAAW,KAAvB,SAAhG,kFAAoO,0BAAYA,WAAW,KAAvB,eAApO,YACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,8MAEL,kEAAiD,0BAAYA,WAAW,KAAvB,SAAjD,QAA2G,0BAAYA,WAAW,KAAvB,SAA3G,UAAuK,0BAAYA,WAAW,KAAvB,SAAvK,uNACA,oCACA,uFAAsE,0BAAYA,WAAW,KAAvB,sBAAtE,iFAAsN,0BAAYA,WAAW,KAAvB,sBAAtN,iCAAsT,0BAAYA,WAAW,KAAvB,SAAtT,+CACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,8CAEL,kDAAiC,0BAAYA,WAAW,KAAvB,sBAAjC,2BACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,wBAEL,0CAAyB,0BAAYA,WAAW,KAAvB,SAAzB,0CAAqH,0BAAYA,WAAW,KAAvB,yBAArH,cACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,0NAQTH,EAAWI,gBAAiB","file":"component---src-pages-troubleshooting-operator-upgrades-mdx-f410cfb7c6ae0074e645.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/datapower-operator-doc/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`If any known issues exist or migration paths are needed to upgrade from one version of the DataPower Operator to another, they will be documented here.`}</p>\n    </PageDescription>\n    <h1>{`1.0.1`}</h1>\n    <h2>{`Invalid value for `}<inlineCode parentName=\"h2\">{`spec.selector`}</inlineCode></h2>\n    <p>{`When attempting to ugprade from `}<inlineCode parentName=\"p\">{`1.0.0`}</inlineCode>{` to `}<inlineCode parentName=\"p\">{`1.0.1`}</inlineCode>{` through the Operator Lifecycle Manager, an error will likely be seen that the `}<inlineCode parentName=\"p\">{`installPlan`}</inlineCode>{` failed.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`install strategy failed: Deployment.apps \"datapower-operator\" is invalid: spec.selector: Invalid value: v1.LabelSelector{...}, MatchExpressions:[]v1.LabelSelectorRequirement(nil)}: field is immutable\n`}</code></pre>\n    <p>{`This error occurs because between version `}<inlineCode parentName=\"p\">{`1.0.0`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`1.0.1`}</inlineCode>{` a new `}<inlineCode parentName=\"p\">{`label`}</inlineCode>{` was added to the DataPower Operator Deployment resource to fix an issue related to operator-metrics. However, the install plan is not able to resolve this update because the LabelSelector is an immutable field.`}</p>\n    <h3>{`Resolution`}</h3>\n    <p>{`To workaround this issue, you can manually delete the existing `}<inlineCode parentName=\"p\">{`datapower-operator`}</inlineCode>{` Deployment resource. The Operator Lifecycle Manager should then recreate the `}<inlineCode parentName=\"p\">{`datapower-operator`}</inlineCode>{` Deployment resource with the `}<inlineCode parentName=\"p\">{`1.0.1`}</inlineCode>{` spec, and the install plan should succeed.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc delete deployment datapower-operator\n`}</code></pre>\n    <p>{`Once done, validate a new `}<inlineCode parentName=\"p\">{`datapower-operator`}</inlineCode>{` Deployment is created:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc get deployment\n`}</code></pre>\n    <p>{`Then validate the `}<inlineCode parentName=\"p\">{`1.0.1`}</inlineCode>{` install plan succeeds by checking the `}<inlineCode parentName=\"p\">{`ClusterServiceVersion`}</inlineCode>{` resource:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`$ oc get csv\nNAME                        DISPLAY                 VERSION   REPLACES                    PHASE\ndatapower-operator.v1.0.1   IBM DataPower Gateway   1.0.1     datapower-operator.v1.0.0   Succeeded\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}