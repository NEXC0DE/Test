{"version":3,"sources":["webpack:///./src/pages/guides/operator-rollbacks.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"yeAMO,IAAMA,EAAe,GAEtBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,2EAC5B,kBAASC,KAGZG,EAAkBL,EAAc,mBAChCM,EAAcN,EAAc,eAC5BO,EAAaP,EAAc,cAC3BQ,EAAc,CAClBT,gBAEIU,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGV,E,oIACF,mBACD,OAAO,YAACO,EAAD,KAAeD,EAAiBN,EAAhC,CAAuCU,WAAYA,EAAYC,QAAQ,cAG5E,YAACR,EAAD,CAAiBQ,QAAQ,mBACvB,qHAEF,YAACP,EAAD,CAAaO,QAAQ,eACvB,YAACN,EAAD,CAAYM,QAAQ,cAApB,yBACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,oBACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,sBAEE,+CACA,8GAA6F,0BAAYC,WAAW,KAAvB,oBAA7F,kLAA4U,0BAAYA,WAAW,KAAvB,gBAA5U,WAAgZ,0BAAYA,WAAW,KAAvB,oBAAhZ,mIAAglB,0BAAYA,WAAW,KAAvB,SAAhlB,qBAAupB,0BAAYA,WAAW,KAAvB,0BAAvpB,KACA,wDAAuC,0BAAYA,WAAW,KAAvB,SAAvC,4CAAqI,0BAAYA,WAAW,KAAvB,0BAArI,uCAA+O,0BAAYA,WAAW,KAAvB,YAA/O,0CAA8U,0BAAYA,WAAW,KAAvB,SAA9U,WAA2Y,0BAAYA,WAAW,KAAvB,YAA3Y,2BAA2d,0BAAYA,WAAW,KAAvB,SAA3d,eACA,wDAAuC,0BAAYA,WAAW,KAAvB,oBAAvC,mDAAuJ,0BAAYA,WAAW,KAAvB,gBAAvJ,sHACA,0CACA,sHAAqG,sBAAQA,WAAW,KAAnB,eAArG,mDACA,iCACA,+BACA,sBACE,kBAAIA,WAAW,MAAf,yDAA8E,0BAAYA,WAAW,MAAvB,YAA9E,qBAAyJ,0BAAYA,WAAW,MAAvB,aAAzJ,kBACA,kBAAIA,WAAW,MAAf,uCAA4D,0BAAYA,WAAW,MAAvB,QAA5D,YAA0H,0BAAYA,WAAW,MAAvB,aAA1H,mBAEF,8BACA,sBACE,kBAAIA,WAAW,MAAf,mBAAwC,0BAAYA,WAAW,MAAvB,oBAAxC,qCAA2I,0BAAYA,WAAW,MAAvB,QAA3I,cACA,kBAAIA,WAAW,MAAf,cAAmC,0BAAYA,WAAW,MAAvB,YAAnC,iFACA,kBAAIA,WAAW,MAAf,gBAAqC,0BAAYA,WAAW,MAAvB,QAArC,oDAEF,2CACA,qHAAoG,0BAAYA,WAAW,KAAvB,iBAApG,yBACA,iCACA,+BACA,sBACE,kBAAIA,WAAW,MAAf,uDAA4E,0BAAYA,WAAW,MAAvB,SAA5E,6BAA4J,0BAAYA,WAAW,MAAvB,SAA5J,KACA,kBAAIA,WAAW,MAAf,uCAA4D,0BAAYA,WAAW,MAAvB,SAA5D,MAEF,8BACA,sBACE,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,mBAAuC,0BAAYA,WAAW,KAAvB,oBAAvC,qCAAyI,0BAAYA,WAAW,KAAvB,SAAzI,eAEF,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,8BAAkD,0BAAYA,WAAW,KAAvB,gBAAlD,KACA,mBAAKA,WAAW,MAAK,sBAAMA,WAAW,OAAU,IAA3B,0aAMvB,kBAAIA,WAAW,MACb,iBAAGA,WAAW,MAAd,2CAA+D,0BAAYA,WAAW,KAAvB,YAA/D,YACA,mBAAKA,WAAW,MAAK,sBAAMA,WAAW,OAAU,IAA3B,sFAS7BH,EAAWI,gBAAiB","file":"component---src-pages-guides-operator-rollbacks-mdx-7f1ee2f3cfbd82d95474.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/datapower-operator-doc/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`This page describes the process to rollback an operator installation to a previous version.`}</p>\n    </PageDescription>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Operand compatibility</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Rollback via OLM</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Rollback via Helm</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Operand compatibility`}</h2>\n    <p>{`Prior to rolling back (downgrading) an operator installation, any DataPower operands (`}<inlineCode parentName=\"p\">{`DataPowerService`}</inlineCode>{` custom resources) currently being managed by the operator must be made compatible with the desired (lower) version of the operator. One main consideration here should be the `}<inlineCode parentName=\"p\">{`spec.version`}</inlineCode>{` of the `}<inlineCode parentName=\"p\">{`DataPowerService`}</inlineCode>{` operand, as the supported values for this field gnerally may change between operator versions. As an example, operator version `}<inlineCode parentName=\"p\">{`1.2.0`}</inlineCode>{` adds support for `}<inlineCode parentName=\"p\">{`spec.version: 10.0.1.1`}</inlineCode>{`.`}</p>\n    <p>{`Thus, if an operator is running `}<inlineCode parentName=\"p\">{`1.2.0`}</inlineCode>{` and reconciles a DataPower operand with `}<inlineCode parentName=\"p\">{`spec.version: 10.0.1.1`}</inlineCode>{`, the operand must be downgraded to `}<inlineCode parentName=\"p\">{`10.0.1.0`}</inlineCode>{` prior to rolling the operator back to `}<inlineCode parentName=\"p\">{`1.1.x`}</inlineCode>{` (where `}<inlineCode parentName=\"p\">{`10.0.1.0`}</inlineCode>{` is the highest version `}<inlineCode parentName=\"p\">{`1.1.x`}</inlineCode>{` supports).`}</p>\n    <p>{`To modify the operand, edit any `}<inlineCode parentName=\"p\">{`DataPowerService`}</inlineCode>{` custom resources (CRs) and change the value of `}<inlineCode parentName=\"p\">{`spec.version`}</inlineCode>{` (and any other applicable configurations) such that the CR is compatible with the desired lower operator version.`}</p>\n    <h2>{`Rollback via OLM`}</h2>\n    <p>{`To rollback (downgrade) an operator installation that is managed by OLM, the operator must be `}<strong parentName=\"p\">{`reinstalled`}</strong>{` as OLM does not support downgrading operators.`}</p>\n    <h3>{`Example`}</h3>\n    <p>{`Given:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`You have a DataPower Operator installed, with channel `}<inlineCode parentName=\"li\">{`v1.2-eus`}</inlineCode>{` selected with an `}<inlineCode parentName=\"li\">{`Automatic`}</inlineCode>{` subscription.`}</li>\n      <li parentName=\"ul\">{`You wish to rollback (downgrade) to `}<inlineCode parentName=\"li\">{`v1.1`}</inlineCode>{` with an `}<inlineCode parentName=\"li\">{`Automatic`}</inlineCode>{` subscription.`}</li>\n    </ul>\n    <p>{`Flow:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Edit applicable `}<inlineCode parentName=\"li\">{`DataPowerService`}</inlineCode>{` CRs to ensure compatibility with `}<inlineCode parentName=\"li\">{`v1.1`}</inlineCode>{` operator.`}</li>\n      <li parentName=\"ol\">{`Delete the `}<inlineCode parentName=\"li\">{`v1.2-eus`}</inlineCode>{` subscription / installation, leaving any operands deployed in the namespace.`}</li>\n      <li parentName=\"ol\">{`Create a new `}<inlineCode parentName=\"li\">{`v1.1`}</inlineCode>{` subscription, triggering the new installation.`}</li>\n    </ol>\n    <h2>{`Rollback via Helm`}</h2>\n    <p>{`To rollback (downgrade) an operator installation that was deployed using our Helm chart, the `}<inlineCode parentName=\"p\">{`helm rollback`}</inlineCode>{` command can be used.`}</p>\n    <h3>{`Example`}</h3>\n    <p>{`Given:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`You have a DataPower Operator installed, at version `}<inlineCode parentName=\"li\">{`1.2.0`}</inlineCode>{`, which was upgraded from `}<inlineCode parentName=\"li\">{`1.1.1`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`You wish to rollback (downgrade) to `}<inlineCode parentName=\"li\">{`1.1.1`}</inlineCode>{`.`}</li>\n    </ul>\n    <p>{`Flow:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Edit applicable `}<inlineCode parentName=\"p\">{`DataPowerService`}</inlineCode>{` CRs to ensure compatibility with `}<inlineCode parentName=\"p\">{`1.1.1`}</inlineCode>{` operator.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Check revision history via `}<inlineCode parentName=\"p\">{`helm history`}</inlineCode>{`.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`$ helm history datapower-operator\nREVISION        UPDATED                         STATUS          CHART                           APP VERSION     DESCRIPTION\n1               Mon Dec  7 14:23:56 2020        superseded      datapower-operator-1.1.1        1.1.1           Install complete\n2               Mon Dec  7 14:24:23 2020        deployed        datapower-operator-1.2.0        1.2.0           Upgrade complete\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Perform the rollback, using appropriate `}<inlineCode parentName=\"p\">{`REVISION`}</inlineCode>{` number.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`$ helm rollback datapower-operator 1\nRollback was a success! Happy Helming!\n`}</code></pre>\n      </li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}