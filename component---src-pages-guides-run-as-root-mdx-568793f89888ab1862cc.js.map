{"version":3,"sources":["webpack:///./src/pages/guides/run-as-root.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"yeAMO,IAAMA,EAAe,GAOtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,0DACA,oHAAmG,0BAAYC,WAAW,KAAvB,6BAAnG,iCAA0M,mBAAGA,WAAW,KAAQ,CAC5N,KAAQ,oEACP,0BAAYA,WAAW,KAAvB,cAFL,4CAGA,4GAA2F,0BAAYA,WAAW,KAAvB,aAA3F,6BACA,8BACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,+zBAwCL,+BACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,sCAEL,yCACA,6HAA4G,0BAAYA,WAAW,KAAvB,kBAA5G,WAAkL,mBAAGA,WAAW,KAAQ,CACpM,KAAQ,oEACP,0BAAYA,WAAW,KAAvB,cAFL,2FAE0J,mBAAGA,WAAW,KAAQ,CAC5K,KAAQ,6EACP,0BAAYA,WAAW,KAAvB,uBAJL,gEAKA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,8EAMTJ,EAAWK,gBAAiB","file":"component---src-pages-guides-run-as-root-mdx-568793f89888ab1862cc.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/datapower-operator-doc/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`Custom SecurityContextConstraint`}</h2>\n    <p>{`If the DataPower Operator is installed on OpenShift Container Platform (OCP), then a custom `}<inlineCode parentName=\"p\">{`SecurityContextConstraint`}</inlineCode>{` must be created to allow the `}<a parentName=\"p\" {...{\n        \"href\": \"/datapower-operator-doc/apis/datapowerservice/v1beta3#runasroot\"\n      }}><inlineCode parentName=\"a\">{`runAsRoot`}</inlineCode></a>{` functionality of the DataPower operand.`}</p>\n    <p>{`Copy the below YAML, and apply it to your OCP cluster as a prerequisite to enabling `}<inlineCode parentName=\"p\">{`runAsRoot`}</inlineCode>{` in the DataPowerService.`}</p>\n    <h3>{`YAML`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`apiVersion: security.openshift.io/v1\nkind: SecurityContextConstraints\nmetadata:\n  annotations:\n    kubernetes.io/description: 'Custom SCC for running IBM DataPower Gateway pods as root user'\n  creationTimestamp: null\n  name: datapower-root\nallowHostDirVolumePlugin: false\nallowHostIPC: false\nallowHostNetwork: false\nallowHostPID: false\nallowHostPorts: false\nallowPrivilegeEscalation: true\nallowPrivilegedContainer: false\nallowedCapabilities:\n- '*'\ndefaultAddCapabilities: null\nfsGroup:\n  type: RunAsAny\ngroups: []\npriority: null\nreadOnlyRootFilesystem: false\nrequiredDropCapabilities: null\nrunAsUser:\n  type: RunAsAny\nseLinuxContext:\n  type: RunAsAny\nsupplementalGroups:\n  type: RunAsAny\nusers: []\nvolumes:\n- configMap\n- downwardAPI\n- emptyDir\n- persistentVolumeClaim\n- projected\n- secret\n`}</code></pre>\n    <h3>{`Apply`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`oc apply -f datapower-root.yaml\n`}</code></pre>\n    <h3>{`Service Account`}</h3>\n    <p>{`The DataPower Operator will automatically configure the default Service Account to bind to the above `}<inlineCode parentName=\"p\">{`datapower-root`}</inlineCode>{` SCC if `}<a parentName=\"p\" {...{\n        \"href\": \"/datapower-operator-doc/apis/datapowerservice/v1beta3#runasroot\"\n      }}><inlineCode parentName=\"a\">{`runAsRoot`}</inlineCode></a>{` is enabled in the DataPowerService. However, if you are using a custom ServiceAccount (`}<a parentName=\"p\" {...{\n        \"href\": \"/datapower-operator-doc/apis/datapowerservice/v1beta3#serviceaccountname\"\n      }}><inlineCode parentName=\"a\">{`serviceAccountName`}</inlineCode></a>{`), you must manually link this Service Account with the SCC.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc adm policy add-scc-to-user datapower-root -z <your-service-account>\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}