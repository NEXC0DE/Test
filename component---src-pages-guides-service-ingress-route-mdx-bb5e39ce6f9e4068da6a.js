(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{zmBJ:function(e,n,t){"use strict";t.r(n),t.d(n,"_frontmatter",(function(){return i})),t.d(n,"default",(function(){return d}));t("91GP"),t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("q1tI");var o=t("7ljp"),r=t("013z");t("qKvR");function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var i={},c=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(o.b)("div",n)}},s=c("PageDescription"),p=c("AnchorLinks"),l=c("AnchorLink"),b={_frontmatter:i},u=r.a;function d(e){var n=e.components,t=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,["components"]);return Object(o.b)(u,a({},b,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)(s,{mdxType:"PageDescription"},Object(o.b)("p",null,"Users are expected to craft and manage Services and Routes that connect the external internet with their DataPower configurations.")),Object(o.b)(p,{mdxType:"AnchorLinks"},Object(o.b)(l,{mdxType:"AnchorLink"},"Service management"),Object(o.b)(l,{mdxType:"AnchorLink"},"Service creation"),Object(o.b)(l,{mdxType:"AnchorLink"},"Route creation"),Object(o.b)(l,{mdxType:"AnchorLink"},"Ingress creation")),Object(o.b)("h2",null,"Service management"),Object(o.b)("p",null,"Creation of Services, Routes, and Ingresses serving DataPower configuration must be flexible, as to meet all possible permutations of customer configuration. The DataPower Operator cannot anticipate all possible configurations of Services, Routes and Ingresses needed or desired by users, so definition and management of those objects are left to the owners of the related DataPower configuration."),Object(o.b)("p",null,"User created Services, Routes, and Ingresses will not be “owned” by the Operator or the ",Object(o.b)("inlineCode",{parentName:"p"},"DataPowerService")," Custom Resource with which they are affiliated. This means that, if the Operator or CR is deleted, the Services will remain."),Object(o.b)("p",null,"When DataPower configuration is updated for a particular instance, the Services, Routes, and Ingresses ",Object(o.b)("strong",{parentName:"p"},"will not")," be updated automatically. Users will need to reconfigure these resources before the new configuration is exposed."),Object(o.b)("h2",null,"Service creation"),Object(o.b)("p",null,"Service creation and management for DataPower workloads is no different than ",Object(o.b)("a",a({parentName:"p"},{href:"https://kubernetes.io/docs/concepts/services-networking/service/"}),"standard Kubernetes Services"),"."),Object(o.b)("p",null,"Writing a yaml for your Service is the recommended method of creating a Service, as it’s declarative and can be version controlled. In your Service, you will specify the Ports you want exposed to the Internet. These ports are entirely dependent on your DataPower configuration. To link the Service to your cluster of DataPowers, you will need to provide the correct label selectors. They are defined as:"),Object(o.b)("pre",null,Object(o.b)("code",a({parentName:"pre"},{}),"apiVersion: v1\nkind: Service\nspec:\n  selector:\n    app.kubernetes.io/component: datapower\n    app.kubernetes.io/instance: <namespace>-<cr-name>\n")),Object(o.b)("p",null,"Where ",Object(o.b)("inlineCode",{parentName:"p"},"<cr-name>")," is the name of your custom resource and ",Object(o.b)("inlineCode",{parentName:"p"},"<namespace>")," is the namespace in which DataPower is deployed."),Object(o.b)("p",null,"In your service, you will need to specify each port that needs to be exposed to the internet. For example, if a Multi-Protocol Gateway is exposed on port ",Object(o.b)("inlineCode",{parentName:"p"},"4545")," and an XML Firewall application exposed on ",Object(o.b)("inlineCode",{parentName:"p"},"4546"),", your Service might look like:"),Object(o.b)("pre",null,Object(o.b)("code",a({parentName:"pre"},{}),"apiVersion: v1\nkind: Service\nspec:\n  selector:\n    app.kubernetes.io/component: datapower\n    app.kubernetes.io/instance: <namespace>-<cr-name>\n  ports:\n  - protocol: TCP\n    port: 4545\n    targetPort: 4545\n    name: mpgw\n  - protocol: TCP\n    port: 4546\n    targetPort: 4546\n    name: xml\n")),Object(o.b)("p",null,"When either a Route or Ingress is configured to connect via this Service, only the ports ",Object(o.b)("inlineCode",{parentName:"p"},"4545")," and ",Object(o.b)("inlineCode",{parentName:"p"},"4546")," will be available to use, all others will not connect."),Object(o.b)("h2",null,"Route creation"),Object(o.b)("p",null,"Route creation should be done in accordance to your Cloud Provider’s Route implementation, following ",Object(o.b)("a",a({parentName:"p"},{href:"https://docs.openshift.com/container-platform/4.5/networking/routes/route-configuration.html"}),"standard OpenShift practices"),"."),Object(o.b)("h2",null,"Ingress creation"),Object(o.b)("p",null,"Ingress creation should be done in accordance to your Cloud Provider’s Ingress implementation, following ",Object(o.b)("a",a({parentName:"p"},{href:"https://kubernetes.io/docs/concepts/services-networking/ingress/"}),"standard Kubernetes practices"),"."))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-service-ingress-route-mdx-bb5e39ce6f9e4068da6a.js.map