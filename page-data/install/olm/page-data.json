{"componentChunkName":"component---src-pages-install-olm-mdx","path":"/install/olm/","result":{"pageContext":{"frontmatter":{"title":"Installation via OLM","description":"Guide to installing the DataPower Operator using the Operator Lifecycle Manager"},"relativePagePath":"/install/olm.mdx","titleType":"page","MdxNode":{"id":"d7041248-7bab-5fac-b387-ce81bd4a21d5","children":[],"parent":"1ab3c978-3182-5302-82c6-be0b2e19cfa9","internal":{"content":"---\ntitle: Installation via OLM\ndescription: Guide to installing the DataPower Operator using the Operator Lifecycle Manager\n---\n\n<PageDescription>\n\nThe Operator Lifecycle Manager (OLM) provides a framework for installing, updating, and managing the lifecycle of operators and their services.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Prerequisites</AnchorLink>\n  <AnchorLink>Installing the CatalogSource</AnchorLink>\n  <AnchorLink>Installing the DataPower Operator</AnchorLink>\n  <AnchorLink>References</AnchorLink>\n</AnchorLinks>\n\n## Prerequisites\n\nThe DataPower Operator currently supports installation via OLM in OCP clusters running version 4.6 or higher.\n\n### Coexistence\n\nWhen installing an operator via OLM, you have the option to choose its **Installation Mode**. There are two options:\n\n- All namespaces on the cluster (`AllNamespaces`)\n- A specific namespace on the cluster (`OwnNamespace`)\n\nIf installed in `AllNamespaces` mode, the Operator will use a ClusterRole and ClusterRoleBinding and thus have cluster-wide scope to manage DataPower resources across all namespaces. If installed in `OwnNamespace` mode, the operator will use a Role and RoleBinding as its primary access (isolated to the namespace it's installed in), with a limited set of ClusterRole permissions (see [Cluster-scope permissions](/install/prereqs#cluster-scope-permissions)).\n\n<InlineNotification kind=\"warning\">\n\n**Warning:** You should not install the Operator in more than one mode. If `AllNamespaces` is chosen, do not subsequently install a second instance in `OwnNamespace` mode.\n\n</InlineNotification>\n\n<InlineNotification kind=\"warning\">\n\n**Warning:** If installing more than one instance of the Operator in `OwnNamespace` mode across multiple namespaces, they **MUST** be installed using the same channel / version.\n\n</InlineNotification>\n\n## Installing the CatalogSource\n\nTo enable the installation of the DataPower Operator, a `CatalogSource` must be created in the `openshift-marketplace`.\n\nThe below YAML snippet can be used to create the `CatalogSource` resource, which references the `datapower-operator-catalog` image from IBM Container Registry. The use of the `latest` tag here will allow OLM to poll IBM Container Registry and pull new catalog images when they become available, enabling over-the-air updates.\n\n```yaml\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: ibm-datapower-operator-catalog\n  namespace: openshift-marketplace\nspec:\n  displayName: IBM DataPower Operator\n  publisher: IBM\n  sourceType: grpc\n  image: icr.io/cpopen/datapower-operator-catalog:latest\n  updateStrategy:\n    registryPoll:\n      interval: 45m\n```\n\nYou can create this resource manually either via the OpenShift Console UI, or by using the `oc` CLI.\n\n### Using the OpenShift Console\n\nTo creating this resource using the OpenShift Console, use the following steps.\n\n1. Navigate to your OpenShift Console UI.\n2. In the top-right of the UI, on the header bar, click the Import button `(+)` to import YAML.\n3. Copy and paste the above YAML snippet into the editor.\n4. Click the **Create** button to create the resource.\n\n### Using the `oc` CLI\n\nTo create this resource using the `oc` CLI, use the following steps.\n\n1. Create a YAML file containing the above YAML snippet.\n2. Use the `oc apply` command to apply the YAML resource.\n\n    ```\n    oc apply -f ibm-datapower-operator-catalog.yaml\n    ```\n\n### Validating the CatalogSource is installed\n\nTo validate that the `CatalogSource` resource was installed correctly, use the following steps.\n\n1. Navigate to the OpenShift Console UI.\n2. On the left panel, expand the **Operators** section.\n3. Select **OperatorHub**.\n4. At the top of the OperatorHub section, enter `DataPower` into the Filter search box.\n5. A tile should be shown titled **IBM DataPower Gateway**.\n\n## Installing the DataPower Operator\n\nTo install an instance of the DataPower Operator, use the following steps.\n\n1. Use the steps above to locate the **IBM DataPower Gateway** tile in the OperatorHub UI.\n2. Select the **IBM DataPower Gateway** tile. A panel to the right should appear.\n3. Click the **Install** button on the right panel.\n4. Under **Installation Mode** select your desired installation mode.\n5. Select the desired **Update Channel**.\n6. Select the desired **Approval Strategy**.\n\n    <InlineNotification>\n\n    The Approval Strategy is what determines if the DataPower Operator will automatically update when new releases become available within the selected channel. If `Automatic` is selected, over-the-air updates will occur automatically as they become available. If `Manual` is selected, an administrator would need to approve each update as it becomes available through OLM.\n\n    </InlineNotification>\n\n7. Click the **Subscribe** button to install the DataPower Operator.\n\n## References\n\nThe below references might be helpful if you wish to learn more about OLM.\n\n- [Understanding the Operator Lifecycle Manager (OLM)](https://docs.openshift.com/container-platform/4.6/operators/understanding/olm/olm-understanding-olm.html)\n- [Adding Operators to a cluster](https://docs.openshift.com/container-platform/4.6/operators/admin/olm-adding-operators-to-cluster.html)\n","type":"Mdx","contentDigest":"7fde8fc2fa772ad620ea04df4ca76f71","counter":131,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Installation via OLM","description":"Guide to installing the DataPower Operator using the Operator Lifecycle Manager"},"exports":{},"rawBody":"---\ntitle: Installation via OLM\ndescription: Guide to installing the DataPower Operator using the Operator Lifecycle Manager\n---\n\n<PageDescription>\n\nThe Operator Lifecycle Manager (OLM) provides a framework for installing, updating, and managing the lifecycle of operators and their services.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Prerequisites</AnchorLink>\n  <AnchorLink>Installing the CatalogSource</AnchorLink>\n  <AnchorLink>Installing the DataPower Operator</AnchorLink>\n  <AnchorLink>References</AnchorLink>\n</AnchorLinks>\n\n## Prerequisites\n\nThe DataPower Operator currently supports installation via OLM in OCP clusters running version 4.6 or higher.\n\n### Coexistence\n\nWhen installing an operator via OLM, you have the option to choose its **Installation Mode**. There are two options:\n\n- All namespaces on the cluster (`AllNamespaces`)\n- A specific namespace on the cluster (`OwnNamespace`)\n\nIf installed in `AllNamespaces` mode, the Operator will use a ClusterRole and ClusterRoleBinding and thus have cluster-wide scope to manage DataPower resources across all namespaces. If installed in `OwnNamespace` mode, the operator will use a Role and RoleBinding as its primary access (isolated to the namespace it's installed in), with a limited set of ClusterRole permissions (see [Cluster-scope permissions](/install/prereqs#cluster-scope-permissions)).\n\n<InlineNotification kind=\"warning\">\n\n**Warning:** You should not install the Operator in more than one mode. If `AllNamespaces` is chosen, do not subsequently install a second instance in `OwnNamespace` mode.\n\n</InlineNotification>\n\n<InlineNotification kind=\"warning\">\n\n**Warning:** If installing more than one instance of the Operator in `OwnNamespace` mode across multiple namespaces, they **MUST** be installed using the same channel / version.\n\n</InlineNotification>\n\n## Installing the CatalogSource\n\nTo enable the installation of the DataPower Operator, a `CatalogSource` must be created in the `openshift-marketplace`.\n\nThe below YAML snippet can be used to create the `CatalogSource` resource, which references the `datapower-operator-catalog` image from IBM Container Registry. The use of the `latest` tag here will allow OLM to poll IBM Container Registry and pull new catalog images when they become available, enabling over-the-air updates.\n\n```yaml\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: ibm-datapower-operator-catalog\n  namespace: openshift-marketplace\nspec:\n  displayName: IBM DataPower Operator\n  publisher: IBM\n  sourceType: grpc\n  image: icr.io/cpopen/datapower-operator-catalog:latest\n  updateStrategy:\n    registryPoll:\n      interval: 45m\n```\n\nYou can create this resource manually either via the OpenShift Console UI, or by using the `oc` CLI.\n\n### Using the OpenShift Console\n\nTo creating this resource using the OpenShift Console, use the following steps.\n\n1. Navigate to your OpenShift Console UI.\n2. In the top-right of the UI, on the header bar, click the Import button `(+)` to import YAML.\n3. Copy and paste the above YAML snippet into the editor.\n4. Click the **Create** button to create the resource.\n\n### Using the `oc` CLI\n\nTo create this resource using the `oc` CLI, use the following steps.\n\n1. Create a YAML file containing the above YAML snippet.\n2. Use the `oc apply` command to apply the YAML resource.\n\n    ```\n    oc apply -f ibm-datapower-operator-catalog.yaml\n    ```\n\n### Validating the CatalogSource is installed\n\nTo validate that the `CatalogSource` resource was installed correctly, use the following steps.\n\n1. Navigate to the OpenShift Console UI.\n2. On the left panel, expand the **Operators** section.\n3. Select **OperatorHub**.\n4. At the top of the OperatorHub section, enter `DataPower` into the Filter search box.\n5. A tile should be shown titled **IBM DataPower Gateway**.\n\n## Installing the DataPower Operator\n\nTo install an instance of the DataPower Operator, use the following steps.\n\n1. Use the steps above to locate the **IBM DataPower Gateway** tile in the OperatorHub UI.\n2. Select the **IBM DataPower Gateway** tile. A panel to the right should appear.\n3. Click the **Install** button on the right panel.\n4. Under **Installation Mode** select your desired installation mode.\n5. Select the desired **Update Channel**.\n6. Select the desired **Approval Strategy**.\n\n    <InlineNotification>\n\n    The Approval Strategy is what determines if the DataPower Operator will automatically update when new releases become available within the selected channel. If `Automatic` is selected, over-the-air updates will occur automatically as they become available. If `Manual` is selected, an administrator would need to approve each update as it becomes available through OLM.\n\n    </InlineNotification>\n\n7. Click the **Subscribe** button to install the DataPower Operator.\n\n## References\n\nThe below references might be helpful if you wish to learn more about OLM.\n\n- [Understanding the Operator Lifecycle Manager (OLM)](https://docs.openshift.com/container-platform/4.6/operators/understanding/olm/olm-understanding-olm.html)\n- [Adding Operators to a cluster](https://docs.openshift.com/container-platform/4.6/operators/admin/olm-adding-operators-to-cluster.html)\n","fileAbsolutePath":"/home/travis/build/IBM/datapower-operator-doc/src/pages/install/olm.mdx"}}}}