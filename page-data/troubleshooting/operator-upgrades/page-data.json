{"componentChunkName":"component---src-pages-troubleshooting-operator-upgrades-mdx","path":"/troubleshooting/operator-upgrades/","result":{"pageContext":{"frontmatter":{"title":"DataPower Operator Upgrades","description":"Troubleshooting guide related to upgrading the DataPower Operator"},"relativePagePath":"/troubleshooting/operator-upgrades.mdx","titleType":"page","MdxNode":{"id":"3480e2b3-517a-5fd2-a350-6460afdb2636","children":[],"parent":"a3ebfe7a-9e4b-59eb-932a-1dc3e3128535","internal":{"content":"---\ntitle: DataPower Operator Upgrades\ndescription: Troubleshooting guide related to upgrading the DataPower Operator\n---\n\n<PageDescription>\n\nIf any known issues exist or migration paths are needed to upgrade from one version of the DataPower Operator to another, they will be documented here.\n\n</PageDescription>\n\n# 1.0.1\n\n## Invalid value for `spec.selector`\n\nWhen attempting to ugprade from `1.0.0` to `1.0.1` through the Operator Lifecycle Manager, an error will likely be seen that the `installPlan` failed.\n\n```\ninstall strategy failed: Deployment.apps \"datapower-operator\" is invalid: spec.selector: Invalid value: v1.LabelSelector{...}, MatchExpressions:[]v1.LabelSelectorRequirement(nil)}: field is immutable\n```\n\nThis error occurs because between version `1.0.0` and `1.0.1` a new `label` was added to the DataPower Operator Deployment resource to fix an issue related to operator-metrics. However, the install plan is not able to resolve this update because the LabelSelector is an immutable field.\n\n### Resolution\n\nTo workaround this issue, you can manually delete the existing `datapower-operator` Deployment resource. The Operator Lifecycle Manager should then recreate the `datapower-operator` Deployment resource with the `1.0.1` spec, and the install plan should succeed.\n\n```\noc delete deployment datapower-operator\n```\n\nOnce done, validate a new `datapower-operator` Deployment is created:\n\n```\noc get deployment\n```\n\nThen validate the `1.0.1` install plan succeeds by checking the `ClusterServiceVersion` resource:\n\n```\n$ oc get csv\nNAME                        DISPLAY                 VERSION   REPLACES                    PHASE\ndatapower-operator.v1.0.1   IBM DataPower Gateway   1.0.1     datapower-operator.v1.0.0   Succeeded\n```\n","type":"Mdx","contentDigest":"f9c76c7ffd3cb9590c45b7951a6a8096","counter":93,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"DataPower Operator Upgrades","description":"Troubleshooting guide related to upgrading the DataPower Operator"},"exports":{},"rawBody":"---\ntitle: DataPower Operator Upgrades\ndescription: Troubleshooting guide related to upgrading the DataPower Operator\n---\n\n<PageDescription>\n\nIf any known issues exist or migration paths are needed to upgrade from one version of the DataPower Operator to another, they will be documented here.\n\n</PageDescription>\n\n# 1.0.1\n\n## Invalid value for `spec.selector`\n\nWhen attempting to ugprade from `1.0.0` to `1.0.1` through the Operator Lifecycle Manager, an error will likely be seen that the `installPlan` failed.\n\n```\ninstall strategy failed: Deployment.apps \"datapower-operator\" is invalid: spec.selector: Invalid value: v1.LabelSelector{...}, MatchExpressions:[]v1.LabelSelectorRequirement(nil)}: field is immutable\n```\n\nThis error occurs because between version `1.0.0` and `1.0.1` a new `label` was added to the DataPower Operator Deployment resource to fix an issue related to operator-metrics. However, the install plan is not able to resolve this update because the LabelSelector is an immutable field.\n\n### Resolution\n\nTo workaround this issue, you can manually delete the existing `datapower-operator` Deployment resource. The Operator Lifecycle Manager should then recreate the `datapower-operator` Deployment resource with the `1.0.1` spec, and the install plan should succeed.\n\n```\noc delete deployment datapower-operator\n```\n\nOnce done, validate a new `datapower-operator` Deployment is created:\n\n```\noc get deployment\n```\n\nThen validate the `1.0.1` install plan succeeds by checking the `ClusterServiceVersion` resource:\n\n```\n$ oc get csv\nNAME                        DISPLAY                 VERSION   REPLACES                    PHASE\ndatapower-operator.v1.0.1   IBM DataPower Gateway   1.0.1     datapower-operator.v1.0.0   Succeeded\n```\n","fileAbsolutePath":"/home/travis/build/IBM/datapower-operator-doc/src/pages/troubleshooting/operator-upgrades.mdx"}}}}