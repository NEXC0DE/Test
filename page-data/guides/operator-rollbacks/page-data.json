{"componentChunkName":"component---src-pages-guides-operator-rollbacks-mdx","path":"/guides/operator-rollbacks/","result":{"pageContext":{"frontmatter":{"title":"Operator Rollbacks","description":"Guide to rolling back (downgrading) an operator installation"},"relativePagePath":"/guides/operator-rollbacks.mdx","titleType":"page","MdxNode":{"id":"267ad021-70da-5a46-9944-594e50258fca","children":[],"parent":"fd8814f0-eb5d-5127-b490-f037d51d92d6","internal":{"content":"---\ntitle: Operator Rollbacks\ndescription: Guide to rolling back (downgrading) an operator installation\n---\n\n<PageDescription>\n\nThis page describes the process to rollback an operator installation to a previous version.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Operand compatibility</AnchorLink>\n  <AnchorLink>Rollback via OLM</AnchorLink>\n  <AnchorLink>Rollback via Helm</AnchorLink>\n</AnchorLinks>\n\n## Operand compatibility\n\nPrior to rolling back (downgrading) an operator installation, any DataPower operands (`DataPowerService` custom resources) currently being managed by the operator must be made compatible with the desired (lower) version of the operator. One main consideration here should be the `spec.version` of the `DataPowerService` operand, as the supported values for this field gnerally may change between operator versions. As an example, operator version `1.2.0` adds support for `spec.version: 10.0.1.1`.\n\nThus, if an operator is running `1.2.0` and reconciles a DataPower operand with `spec.version: 10.0.1.1`, the operand must be downgraded to `10.0.1.0` prior to rolling the operator back to `1.1.x` (where `10.0.1.0` is the highest version `1.1.x` supports).\n\nTo modify the operand, edit any `DataPowerService` custom resources (CRs) and change the value of `spec.version` (and any other applicable configurations) such that the CR is compatible with the desired lower operator version.\n\n## Rollback via OLM\n\nTo rollback (downgrade) an operator installation that is managed by OLM, the operator must be **reinstalled** as OLM does not support downgrading operators.\n\n### Example\n\nGiven:\n\n- You have a DataPower Operator installed, with channel `v1.2-eus` selected with an `Automatic` subscription.\n- You wish to rollback (downgrade) to `v1.1` with an `Automatic` subscription.\n\nFlow:\n\n1. Edit applicable `DataPowerService` CRs to ensure compatibility with `v1.1` operator.\n2. Delete the `v1.2-eus` subscription / installation, leaving any operands deployed in the namespace.\n3. Create a new `v1.1` subscription, triggering the new installation.\n\n## Rollback via Helm\n\nTo rollback (downgrade) an operator installation that was deployed using our Helm chart, the `helm rollback` command can be used.\n\n### Example\n\nGiven:\n\n- You have a DataPower Operator installed, at version `1.2.0`, which was upgraded from `1.1.1`.\n- You wish to rollback (downgrade) to `1.1.1`.\n\nFlow:\n\n1. Edit applicable `DataPowerService` CRs to ensure compatibility with `1.1.1` operator.\n2. Check revision history via `helm history`.\n    \n    ```\n    $ helm history datapower-operator\n    REVISION        UPDATED                         STATUS          CHART                           APP VERSION     DESCRIPTION\n    1               Mon Dec  7 14:23:56 2020        superseded      datapower-operator-1.1.1        1.1.1           Install complete\n    2               Mon Dec  7 14:24:23 2020        deployed        datapower-operator-1.2.0        1.2.0           Upgrade complete\n    ```\n\n3. Perform the rollback, using appropriate `REVISION` number.\n\n    ```\n    $ helm rollback datapower-operator 1\n    Rollback was a success! Happy Helming!\n    ```","type":"Mdx","contentDigest":"b02954521a379f6e22c48cb8e8a53e0e","counter":119,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Operator Rollbacks","description":"Guide to rolling back (downgrading) an operator installation"},"exports":{},"rawBody":"---\ntitle: Operator Rollbacks\ndescription: Guide to rolling back (downgrading) an operator installation\n---\n\n<PageDescription>\n\nThis page describes the process to rollback an operator installation to a previous version.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Operand compatibility</AnchorLink>\n  <AnchorLink>Rollback via OLM</AnchorLink>\n  <AnchorLink>Rollback via Helm</AnchorLink>\n</AnchorLinks>\n\n## Operand compatibility\n\nPrior to rolling back (downgrading) an operator installation, any DataPower operands (`DataPowerService` custom resources) currently being managed by the operator must be made compatible with the desired (lower) version of the operator. One main consideration here should be the `spec.version` of the `DataPowerService` operand, as the supported values for this field gnerally may change between operator versions. As an example, operator version `1.2.0` adds support for `spec.version: 10.0.1.1`.\n\nThus, if an operator is running `1.2.0` and reconciles a DataPower operand with `spec.version: 10.0.1.1`, the operand must be downgraded to `10.0.1.0` prior to rolling the operator back to `1.1.x` (where `10.0.1.0` is the highest version `1.1.x` supports).\n\nTo modify the operand, edit any `DataPowerService` custom resources (CRs) and change the value of `spec.version` (and any other applicable configurations) such that the CR is compatible with the desired lower operator version.\n\n## Rollback via OLM\n\nTo rollback (downgrade) an operator installation that is managed by OLM, the operator must be **reinstalled** as OLM does not support downgrading operators.\n\n### Example\n\nGiven:\n\n- You have a DataPower Operator installed, with channel `v1.2-eus` selected with an `Automatic` subscription.\n- You wish to rollback (downgrade) to `v1.1` with an `Automatic` subscription.\n\nFlow:\n\n1. Edit applicable `DataPowerService` CRs to ensure compatibility with `v1.1` operator.\n2. Delete the `v1.2-eus` subscription / installation, leaving any operands deployed in the namespace.\n3. Create a new `v1.1` subscription, triggering the new installation.\n\n## Rollback via Helm\n\nTo rollback (downgrade) an operator installation that was deployed using our Helm chart, the `helm rollback` command can be used.\n\n### Example\n\nGiven:\n\n- You have a DataPower Operator installed, at version `1.2.0`, which was upgraded from `1.1.1`.\n- You wish to rollback (downgrade) to `1.1.1`.\n\nFlow:\n\n1. Edit applicable `DataPowerService` CRs to ensure compatibility with `1.1.1` operator.\n2. Check revision history via `helm history`.\n    \n    ```\n    $ helm history datapower-operator\n    REVISION        UPDATED                         STATUS          CHART                           APP VERSION     DESCRIPTION\n    1               Mon Dec  7 14:23:56 2020        superseded      datapower-operator-1.1.1        1.1.1           Install complete\n    2               Mon Dec  7 14:24:23 2020        deployed        datapower-operator-1.2.0        1.2.0           Upgrade complete\n    ```\n\n3. Perform the rollback, using appropriate `REVISION` number.\n\n    ```\n    $ helm rollback datapower-operator 1\n    Rollback was a success! Happy Helming!\n    ```","fileAbsolutePath":"/home/travis/build/IBM/datapower-operator-doc/src/pages/guides/operator-rollbacks.mdx"}}}}