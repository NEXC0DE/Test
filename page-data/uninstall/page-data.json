{"componentChunkName":"component---src-pages-uninstall-index-mdx","path":"/uninstall/","result":{"pageContext":{"frontmatter":{"title":"Uninstalling","description":"Guide to uninstalling the DataPower Operator."},"relativePagePath":"/uninstall/index.mdx","titleType":"page","MdxNode":{"id":"ae4d8a7c-28bc-53b0-96c8-98a657cad068","children":[],"parent":"9ca62949-c59d-545a-83e7-455c6545e44f","internal":{"content":"---\ntitle: Uninstalling\ndescription: Guide to uninstalling the DataPower Operator.\n---\n\n<PageDescription>\n\nA guide to uninstalling the DataPower Operator with troubleshooting tips and workarounds.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Order of uninstallation</AnchorLink>\n  <AnchorLink>Uninstalling with OLM</AnchorLink>\n  <AnchorLink>Uninstalling with CASE</AnchorLink>\n  <AnchorLink>Known issues</AnchorLink>\n</AnchorLinks>\n\n## Order of uninstallation\nResources **must** be removed in the following order to avoid deadlocks:\n1. Remove all `DataPowerService` and `DataPowerMonitor` Custom Resources from namespace.\n2. Uninstall Operator with either OLM or CASE.\n3. If completely removing from cluster, remove CRDs.\n\n## Uninstalling with OLM\n\n### In the GUI\n\nIn the OCP GUI, navigate to Operators->Installed Operators on the left side pane. In the `Project` dropdown box, select the namespace from which to uninstall. Find the specific DataPower Operator Subscription you wish to uninstall and click the options menu on the right side of the row. Select \"Uninstall Operator\".\n\n### In the CLI\n\nUsing the `oc` CLI tool, delete the DataPower Operator Subscription by doing\n```\noc -n mynamespace delete subscription datapower-operator\n```\n\n## Uninstalling with CASE\n\nFor uninstalling via CASE, refer to the relevant uninstall command in the [CASE document](/install/case).\n\n## Removing CRDs\n\nTo remove the DataPower CRDs from the cluster, run\n```\nkubectl delete crds datapowerservices.datapower.ibm.com\nkubectl delete crds datapowermonitors.datapower.ibm.com \n```\n\n## Known issues\n\n### Custom Resource deletion blocked by conversion\n\nAs of DataPower Operator version 1.1.0, a conversion webhook is deployed by the DataPower Operator. If the conversion webhook was managed by the DataPower Operator being uninstalled it will get cleaned up due to having Owner References set to the managing DataPower Operator. If you are uninstalling the last DataPower Operator in the cluster, no new conversion webhook will get deployed. Once in this state, it becomes impossible to delete or create new `DataPowerService` Custom Resources because the Kubernetes API Server is attempting to connect to a no-longer-alive conversion webhook.\n\nTo clear out the conversion definition, run\n```\nkubectl patch crds datapowerservices.datapower.ibm.com -p '{\"spec\": {\"conversion\": null}}'\n```\n\nAfter the patch has been processed, the custom resources can be modified and deleted.\n\nTo avoid getting into this situation in the future, remove all `DataPowerService` Custom Resources before uninstalling the DataPower Operator.\n","type":"Mdx","contentDigest":"a8522a55144a866ba06332e2f9d25b57","counter":137,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Uninstalling","description":"Guide to uninstalling the DataPower Operator."},"exports":{},"rawBody":"---\ntitle: Uninstalling\ndescription: Guide to uninstalling the DataPower Operator.\n---\n\n<PageDescription>\n\nA guide to uninstalling the DataPower Operator with troubleshooting tips and workarounds.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Order of uninstallation</AnchorLink>\n  <AnchorLink>Uninstalling with OLM</AnchorLink>\n  <AnchorLink>Uninstalling with CASE</AnchorLink>\n  <AnchorLink>Known issues</AnchorLink>\n</AnchorLinks>\n\n## Order of uninstallation\nResources **must** be removed in the following order to avoid deadlocks:\n1. Remove all `DataPowerService` and `DataPowerMonitor` Custom Resources from namespace.\n2. Uninstall Operator with either OLM or CASE.\n3. If completely removing from cluster, remove CRDs.\n\n## Uninstalling with OLM\n\n### In the GUI\n\nIn the OCP GUI, navigate to Operators->Installed Operators on the left side pane. In the `Project` dropdown box, select the namespace from which to uninstall. Find the specific DataPower Operator Subscription you wish to uninstall and click the options menu on the right side of the row. Select \"Uninstall Operator\".\n\n### In the CLI\n\nUsing the `oc` CLI tool, delete the DataPower Operator Subscription by doing\n```\noc -n mynamespace delete subscription datapower-operator\n```\n\n## Uninstalling with CASE\n\nFor uninstalling via CASE, refer to the relevant uninstall command in the [CASE document](/install/case).\n\n## Removing CRDs\n\nTo remove the DataPower CRDs from the cluster, run\n```\nkubectl delete crds datapowerservices.datapower.ibm.com\nkubectl delete crds datapowermonitors.datapower.ibm.com \n```\n\n## Known issues\n\n### Custom Resource deletion blocked by conversion\n\nAs of DataPower Operator version 1.1.0, a conversion webhook is deployed by the DataPower Operator. If the conversion webhook was managed by the DataPower Operator being uninstalled it will get cleaned up due to having Owner References set to the managing DataPower Operator. If you are uninstalling the last DataPower Operator in the cluster, no new conversion webhook will get deployed. Once in this state, it becomes impossible to delete or create new `DataPowerService` Custom Resources because the Kubernetes API Server is attempting to connect to a no-longer-alive conversion webhook.\n\nTo clear out the conversion definition, run\n```\nkubectl patch crds datapowerservices.datapower.ibm.com -p '{\"spec\": {\"conversion\": null}}'\n```\n\nAfter the patch has been processed, the custom resources can be modified and deleted.\n\nTo avoid getting into this situation in the future, remove all `DataPowerService` Custom Resources before uninstalling the DataPower Operator.\n","fileAbsolutePath":"/home/travis/build/IBM/datapower-operator-doc/src/pages/uninstall/index.mdx"}}}}