{"version":3,"sources":["webpack:///./src/pages/guides/service-ingress-route.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"yeAMO,IAAMA,EAAe,GAEtBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,2EAC5B,kBAASC,KAGZG,EAAkBL,EAAc,mBAChCM,EAAcN,EAAc,eAC5BO,EAAaP,EAAc,cAC3BQ,EAAc,CAClBT,gBAEIU,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGV,E,oIACF,mBACD,OAAO,YAACO,EAAD,KAAeD,EAAiBN,EAAhC,CAAuCU,WAAYA,EAAYC,QAAQ,cAG5E,YAACR,EAAD,CAAiBQ,QAAQ,mBACvB,4JAEF,YAACP,EAAD,CAAaO,QAAQ,eACvB,YAACN,EAAD,CAAYM,QAAQ,cAApB,sBACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,oBACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,kBACA,YAACN,EAAD,CAAYM,QAAQ,cAApB,qBAEE,4CACA,saACA,gHAA+F,0BAAYC,WAAW,KAAvB,oBAA/F,iIACA,+HAA8G,sBAAQA,WAAW,KAAnB,YAA9G,sHACA,0CACA,qGAAoF,mBAAGA,WAAW,KAAQ,CACtG,KAAQ,qEADwE,gCAApF,KAGA,4aACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,2JAOL,8BAAa,0BAAYA,WAAW,KAAvB,aAAb,4CAA+G,0BAAYA,WAAW,KAAvB,eAA/G,qDACA,kLAAiK,0BAAYA,WAAW,KAAvB,QAAjK,+CAAiQ,0BAAYA,WAAW,KAAvB,QAAjQ,mCACA,uBAAK,sBAAMA,WAAW,OAAU,IAA3B,sTAgBL,iHAAgG,0BAAYA,WAAW,KAAvB,QAAhG,QAAyJ,0BAAYA,WAAW,KAAvB,QAAzJ,2DACA,wCACA,6HAA4G,mBAAGA,WAAW,KAAQ,CAC9H,KAAQ,iGADgG,gCAA5G,KAGA,0CACA,iIAAgH,mBAAGA,WAAW,KAAQ,CAClI,KAAQ,qEADoG,iCAAhH,MAOJH,EAAWI,gBAAiB","file":"component---src-pages-guides-service-ingress-route-mdx-c7d8ac19454d640fc5e6.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/datapower-operator-doc/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`Users are expected to craft and manage Services and Routes that connect the external internet with their DataPower configurations.`}</p>\n    </PageDescription>\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Service management</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Service creation</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Route creation</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Ingress creation</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Service management`}</h2>\n    <p>{`Creation of Services, Routes, and Ingresses serving DataPower configuration must be flexible, as to meet all possible permutations of customer configuration. The DataPower Operator cannot anticipate all possible configurations of Services, Routes and Ingresses needed or desired by users, so definition and management of those objects are left to the owners of the related DataPower configuration.`}</p>\n    <p>{`User created Services, Routes, and Ingresses will not be “owned” by the Operator or the `}<inlineCode parentName=\"p\">{`DataPowerService`}</inlineCode>{` Custom Resource with which they are affiliated. This means that, if the Operator or CR is deleted, the Services will remain.`}</p>\n    <p>{`When DataPower configuration is updated for a particular instance, the Services, Routes, and Ingresses `}<strong parentName=\"p\">{`will not`}</strong>{` be updated automatically. Users will need to reconfigure these resources before the new configuration is exposed.`}</p>\n    <h2>{`Service creation`}</h2>\n    <p>{`Service creation and management for DataPower workloads is no different than `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/concepts/services-networking/service/\"\n      }}>{`standard Kubernetes Services`}</a>{`.`}</p>\n    <p>{`Writing a yaml for your Service is the recommended method of creating a Service, as it’s declarative and can be version controlled. In your Service, you will specify the Ports you want exposed to the Internet. These ports are entirely dependent on your DataPower configuration. To link the Service to your cluster of DataPowers, you will need to provide the correct label selectors. They are defined as:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`apiVersion: v1\nkind: Service\nspec:\n  selector:\n    app.kubernetes.io/component: datapower\n    app.kubernetes.io/instance: <namespace>-<cr-name>\n`}</code></pre>\n    <p>{`Where `}<inlineCode parentName=\"p\">{`<cr-name>`}</inlineCode>{` is the name of your custom resource and `}<inlineCode parentName=\"p\">{`<namespace>`}</inlineCode>{` is the namespace in which DataPower is deployed.`}</p>\n    <p>{`In your service, you will need to specify each port that needs to be exposed to the internet. For example, if a Multi-Protocol Gateway is exposed on port `}<inlineCode parentName=\"p\">{`4545`}</inlineCode>{` and an XML Firewall application exposed on `}<inlineCode parentName=\"p\">{`4546`}</inlineCode>{`, your Service might look like:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`apiVersion: v1\nkind: Service\nspec:\n  selector:\n    app.kubernetes.io/component: datapower\n    app.kubernetes.io/instance: <namespace>-<cr-name>\n  ports:\n  - protocol: TCP\n    port: 4545\n    targetPort: 4545\n    name: mpgw\n  - protocol: TCP\n    port: 4546\n    targetPort: 4546\n    name: xml\n`}</code></pre>\n    <p>{`When either a Route or Ingress is configured to connect via this Service, only the ports `}<inlineCode parentName=\"p\">{`4545`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`4546`}</inlineCode>{` will be available to use, all others will not connect.`}</p>\n    <h2>{`Route creation`}</h2>\n    <p>{`Route creation should be done in accordance to your Cloud Provider’s Route implementation, following `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.openshift.com/container-platform/4.5/networking/routes/route-configuration.html\"\n      }}>{`standard OpenShift practices`}</a>{`.`}</p>\n    <h2>{`Ingress creation`}</h2>\n    <p>{`Ingress creation should be done in accordance to your Cloud Provider’s Ingress implementation, following `}<a parentName=\"p\" {...{\n        \"href\": \"https://kubernetes.io/docs/concepts/services-networking/ingress/\"\n      }}>{`standard Kubernetes practices`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}